
let image = require('../');

let test = async function (arrO) {
    try{
        //let result = image.imgRandomCropHorizontalFlipNormalize(arrO, 1/255, 1, 9, 9, 9, 9, 0, true, false, true, Float32Array.from([0.40789654, 0.44719302, 0.47026115]), Float32Array.from([0.28863828, 0.27408164, 0.27809835]));
        //let result = image.imgNormalize(arrO, 1 / 255, 1, Float32Array.from([0.4914, 0.4822, 0.4465]), Float32Array.from([0.2023, 0.1994, 0.2010]), false);
        //let result = image.removeAlpha(arrO);
        //let result = image.convertNetData(arrO, 1/255);
        //let result = image.imgScale(arrO, 9, 9, 1.4, 1.4, 1, true);
        //let result = image.imgColorHSV(arrO, 1, 9, 9, 0, 1, 3, true);


        // let img = new image.Image(4,3,3);
        // let array = Uint8Array.from([
        //     10,11,12,13, 20,21,22,23, 30,31,32,33,
        //     40,41,42,43, 50,51,52,53, 60,61,62,63,
        //     70,71,72,73, 80,81,82,83, 90,91,92,93,
        //
        //     10,11,12,13, 20,21,22,23, 30,31,32,33,
        //     40,41,42,43, 50,51,52,53, 60,61,62,63,
        //     70,71,72,73, 80,81,82,83, 90,91,92,93,
        // ])
        // img.SetNHWCData(array);
        // let nchw = img.GetNCHWData();
        // console.error(.nchw);
        // img.SetNCHWData(nchw);
        // img.RemoveAlpha();
        // let nhwco = img.GetNCHWData();
        // console.error(nhwco);
        //
        // let nhwc = img.GetNHWCData();
        // console.error(nhwc);
        // img.HorizontalFlip();
        //
        // console.error(nhwc);

        // console.error(JSON.stringify(image.GetNCHWData()));
        // console.error(JSON.stringify(Array.from(result)));

        let img = new image.Image(2,5,5);
        let array = new Uint8Array(2*2*5*5);
        array.fill(151);
        img.SetNHWCData(array);
        let move = img.RandomCrop(3,3, 2);
        console.error(img.GetNCHWData(), move)
        let mata = img.NormalizeToMateData(Float32Array.from([0.40789654, 0.44719302, 0.47026115]), Float32Array.from([0.28863828, 0.27408164, 0.27809835]), 1/256);

        console.error(mata.GetData());
    } catch (err) {

        console.error(err);
    }
};

let mainTest = function () {

    let rma = [
        192,110,190,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,
        100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,100,100,255,100,110,120,255,
    ];
    let input = [
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,

        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,
        150,150,150,150,150,150,150,150,150,

        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,
        200,200,200,200,200,200,200,200,200,

        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
        255,255,255,255,255,255,255,255,255,
    ];
    let input2 = [
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,

        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,

        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
        100,100,100,100,100,100,100,100,100,
    ];
    let input0 = [
        110,110,110,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
        110,120,130,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
        110,120,130,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
        110,120,130,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
        110,120,130,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
        110,120,130,110,120,130,110,120,130,111,121,131,111,121,131,111,121,131,
    ]
    //console.log(JSON.stringify(rma));
    //test(Uint8Array.from(rma));
    test(Uint8Array.from(rma));
};

mainTest();
